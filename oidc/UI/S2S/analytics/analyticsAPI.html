<!DOCTYPE html>
<html>
    <head>
        <title>Analytics API</title>
        <link rel='stylesheet' href='../../styles/app.css'>
    </head>
    <body>
        <section>
            <h2>Analytics API</h2>
            <p>
                The analytics API can be used to retrieve details of calls including durations
                and associated charges for a specified account over a given time range.
            </p>
            <p>Before start using API samples, you need to get an access token.</p>
            <div>
                <li><label>ClientId: </label><input type="text" id="client-id" /><li>
                <li><label>ClientSecret: </label><input type="text" id="client-secret" /><li>
            </div>
            <button id='getS2SToken'>Get Analytic Token</button>
            <div class='box'>
                <button id='getDetailedCalls'>Get Detailed Calls</button>
                <input type="datetime-local" value="yyyy-MM-ddThh:mm:ssZ" step="1" id="dateFromDetailedCalls"></input>
                <input type="datetime-local" value="yyyy-MM-ddThh:mm:ssZ" step="1" id="dateToDetailedCalls"></input>    
                <div> chargeable
                    <select id="chargeable">
                        <option value='select'>Select</option>
                        <option value='yes'>yes</option>
                        <option value='no'>no</option>
                    </select>
                </div>
                <div> callAttributes
                    <select id="bound">
                        <option value='select'>Select</option>
                        <option value='inbound'>inbound</option>
                        <option value='outbound'>outbound</option>
                    </select>
                    <select id='status'>
                        <option value='select'>Select</option>
                        <option value='internal'>internal</option>
                        <option value='answered'>answered</option>
                        <option value='unanswered'>unanswered</option>
                    </select>
                    <div class="tooltip">Help
                        <span class="tooltiptext">If you use call Attributes, both parameters should be chosen</span>
                    </div>
                </div>
                <details>
                    <summary>Optional settings
                        <a href='https://developer.intermedia.com/api/spec/analytics/index.html#post-/analytics/calls/call/detail'>Guide</a>
                    </summary>
                    <div>timezone
                        <input id="timezone" placeholder="timezone"></input>
                    </div>
                    <div> sortColumn
                        <select id="sortColumn">
                            <option value='from'>from</option>
                            <option value='to'>to</option>
                            <option value='start'>start</option>
                            <option value='duration'>duration</option>
                            <option value='group'>group</option>
                            <option value='direction'>direction</option>
                            <option value='chargeable'>chargeable</option>
                            <option value='charge'>charge</option>
                            <option value='invoicePeriod'>invoicePeriod</option>
                            <option value='chargeableDuration'>chargeableDuration</option>
                            <option value='freeMinutesUsed'>freeMinutesUsed</option>
                            <option value='freeMinutesQuota'>freeMinutesQuota</option>
                        </select>
                    </div>
                    <div> descending
                        <select id="descending">
                            <option value='true'>true</option>
                            <option value='false'>false</option>
                        </select>
                    </div>
                    <div>offset
                        <input id="offset" placeholder="offset"></input>
                    </div>
                    <div>size
                        <input id="getDetailedCallsSize" placeholder="size"></input>
                    </div>
                    <div>accountId
                        <input id="getDetailedCallsAccountId" placeholder="accountId"></input>
                        <div class="tooltip">Help
                            <span class="tooltiptext">Used for requests for Partner accounts only </span>
                        </div>
                    </div>
                </details>
            </div>
            <div class='box'>
                <button id='getUserCalls'>Get User Calls</button>
                <input type="datetime-local" value="yyyy-MM-ddThh:mm:ss.SSSZ" step="1" id="dateFromUserCalls"></input>
                <input type="datetime-local" value="yyyy-MM-ddThh:mm:ss.SSSZ" step="1" id="dateToUserCalls"></input>    
                <div>userIds<input id='userIds' placeholder='userIds'></input></div>
                <details>
                    <summary>Optional settings
                        <a href='https://developer.intermedia.com/api/spec/analytics/index.html#post-/analytics/calls/user'>Guide</a>
                    </summary>
                    <div>timezone
                        <input id="getUserCallsTimezone" placeholder="timezone"></input>
                    </div>
                    <div>accountId
                        <input id="getUserCallsAccountId" placeholder="accountId"></input>
                        <div class="tooltip">Help
                            <span class="tooltiptext">Used for requests for Partner accounts only</span>
                        </div>
                    </div>
                </details>
            </div>
            <div class='box'>
                <button id='getUserFilters'>Get User Filters</button>
                <input type="datetime-local" value="yyyy-MM-ddThh:mm:ssZ" step="1" id="dateFromUserFilters"></input>
                <input type="datetime-local" value="yyyy-MM-ddThh:mm:ssZ" step="1" id="dateToUserFilters"></input>    
                <details>
                    <summary>Optional settings
                        <a href='https://developer.intermedia.com/api/spec/analytics/index.html#post-/analytics/calls/user/filters'>Guide</a>
                    </summary>
                    <div>timezone
                        <input id="getUserFiltersTimezone" placeholder="timezone"></input>
                    </div>
                    <div>accountId
                        <input id="getUserFiltersAccountId" placeholder="accountId"></input>
                        <div class="tooltip">Help
                            <span class="tooltiptext">Used for requests for Partner accounts only </span>
                        </div>
                    </div>
                </details>
            </div>
        </section>
        <br><br>
        <div>
            <h3>Output: </h3>
            <button id='clearLog'>Clear</button>
            <pre id='out'></pre>
        </div>
    </body>
    <script src='../../log.js'></script>
    <script src='../../../auth/authS2S.js'></script>
    <script src='analyticsUI.js'></script>
    <script src='../../../API/analyticsAPI.js'></script>
    <script type="text/javascript">
        init();
    </script>
</html>

